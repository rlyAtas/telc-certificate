<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>telc â€“ Status der Anfrage</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Status Ihrer Anfrage</h1>

      <% if (status === 'ACTIVE') { %>
        <p class="hint">
          ğŸ•’ Ihre Anfrage ist aktiv. Die ÃœberprÃ¼fung des Zertifikats lÃ¤uft.
        </p>
      <% } %>

      <% if (status === 'CERTIFICATE_FOUND') { %>
        <p class="hint">
          âœ… Das Zertifikat wurde gefunden. Wir haben Sie per E-Mail informiert.
        </p>
      <% } %>

      <% if (status === 'CERTIFICATE_FAILED') { %>
        <p class="hint">
          âŒ Das Zertifikat konnte innerhalb des PrÃ¼fzeitraums nicht gefunden werden.
        </p>
      <% } %>

      <% if (status === 'CHECKING_EXPIRED') { %>
        <p class="hint">
          â„¹ï¸ Die ÃœberprÃ¼fung wurde abgeschlossen.
          Leider konnte innerhalb des PrÃ¼fzeitraums kein Zertifikat gefunden werden.
        </p>
      <% } %>

      <div class="card subcard">
        <p class="subcard__title">Details</p>

        <p class="subcard__text">
          <strong>PrÃ¼fungsdatum:</strong>
          <%= new Date(examDate).toLocaleDateString('de-DE') %>
        </p>

        <p class="subcard__text">
          <strong>Anfrage erstellt am:</strong>
          <%= new Date(createdAt).toLocaleDateString('de-DE') %>
        </p>

        <p class="subcard__text">
          <strong>Letzte ÃœberprÃ¼fung:</strong>
          <%= lastCheckedAt ? new Date(lastCheckedAt).toLocaleString('de-DE') : 'Noch nicht geprÃ¼ft' %>
        </p>

        <% if (finishedAt) { %>
          <p class="subcard__text">
            <strong>Abgeschlossen am:</strong>
            <%= new Date(finishedAt).toLocaleDateString('de-DE') %>
          </p>
        <% } %>

        <% const shouldShowNextCheck = status === 'ACTIVE'; %>
        <% if (shouldShowNextCheck) { %>
          <p class="subcard__text">
            <strong>NÃ¤chste ÃœberprÃ¼fung:</strong>
            <%= nextRunAt ? new Date(nextRunAt).toLocaleString('de-DE') : 'Wird geplant' %>
          </p>
        <% } %>
      </div>

    </div>
  </div>
</body>
</html>
